<form id="login-form">
    <input id="email" type="text" placeholder="email or username" autocomplete="username" />
    <br>
    <input id="password" type="password" placeholder="password" autocomplete="current-password" />
    <br><br>
    <input type="submit" id="login" value="Login"/>
</form>

<p>Don't have an account?<a href="/register">Register</a></p>

<script>
    const redirect = new URLSearchParams(window.location.search).get("redirect") || "/";

    document.getElementById("login").addEventListener("click", async (e) => {
        e.preventDefault();

        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        
        const success = await login(email, password);
        if (success) window.location.href = redirect;
        else alert("Login failed");
    });
</script>